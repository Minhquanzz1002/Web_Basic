<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bài 21</title>
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/Bai21.js"></script>
    <script>
        let i = 0

        function napDSSP(dssp) {
            dssp.forEach(sp => {
                let row = "<tr><td class='text-center'>" + (++i) + "</td><td>" + sp.tensp + "</td><td><img src='" + sp.hinhanh + "' width='100'></td><td contenteditable='true' onkeyup='getTongtien()'>" + sp.soluong + "</td><td class='text-right'>" + sp.dongia + "</td></tr>"

                let myTable = document.getElementById("tbl")
                let newRow = myTable.insertRow(myTable.rows.length)
                newRow.innerHTML = row
            });
        }

        function getTongtien() {
            let tongtien = 0
            let myTable = document.getElementById("tbl")
            let rows = myTable.rows.length
            for (let i = 0; i < rows; i++) {
                let soluong = myTable.rows[i].cells[3].innerHTML
                let dongia = myTable.rows[i].cells[4].innerHTML
                let thanhtien = soluong * dongia
                tongtien += thanhtien
            }
            document.getElementById("total").innerHTML = tongtien + "₫"
        }

        window.onload = function () {
            napDSSP(dssp)
            getTongtien()
        }
    </script>
</head>

<body>
    <div class="container">
        <div class="row">
            <table class="table table-hover table-bordered table-striped">
                <thead class="thead-dark">
                    <tr>
                        <th>STT</th>
                        <th>Tên sản phẩm</th>
                        <th>Hình ảnh</th>
                        <th>Số lượng</th>
                        <th>Đơn giá</th>
                    </tr>
                </thead>
                <tbody id="tbl">
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="4" class="font-weight-bold text-right">Tổng thành tiền: </td>
                        <td id="total" class="font-weight-bold text-right"></td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</body>

</html>